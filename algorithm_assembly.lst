


ARM Macro Assembler    Page 1 


    1 00000000                 AREA             project, CODE, READONLY
    2 00000000         
    3 00000000                 EXPORT           MAIN        ;NEEDED LINE
    4 00000000                 ENTRY                        ;SHOWS WHEN THE COD
                                                            E STARTS
    5 00000000         
    6 00000000         
    7 00000000         MAIN                                 ;USED AS LABEL
    8 00000000         ;; Variable (Register) Definition
    9 00000000 F04F 0000       MOV              R0,#0       ;LINE COUNTER(LINES
                                                             ARE DEFINED AT THE
                                                             END)
   10 00000004 F04F 0100       MOV              R1,#0       ;COLUMN COUNTER
   11 00000008 F04F 0400       MOV              R4,#0       ;OVERALL COUNTER(GO
                                                            ES UNTILL 15*15 - 1
                                                            )
   12 0000000C F04F 5500       MOV              R5,#0x20000000 ;STACK POINTER
   13 00000010 DE00            ADR              R6,LINE1    ;ARRAY START POINTE
                                                            R
   14 00000012 F04F 0800       MOV              R8,#0       ;TEMPORARY REGISTER
                                                             FOR WIEGHT MULTIPL
                                                            ICATIONS
   15 00000016 F04F 0900       MOV              R9,#0       ;TEMPORARY REGISTER
                                                             FOR WIEGHT MULTIPL
                                                            ICATIONS
   16 0000001A F04F 0A00       MOV              R10,#0      ;TEMPORAY FOR LOAD
   17 0000001E         
   18 0000001E F104 0401 
                       LOOP    ADD              R4,R4,#1
   19 00000022 F5B4 7F80       CMP              R4,#256
   20 00000026 D047            BEQ              EOF         ;BRANCH TO EOF
   21 00000028 F04F 0700       MOV              R7,#0       ;ADDED RESULT FOR E
                                                            ACH BYTE
   22 0000002C F106 0601       ADD              R6,R6,#+1   ;SET THE ELEMENTS
   23 00000030 F101 0101       ADD              R1,R1,#+1
   24 00000034 2910            CMP              R1,#16
   25 00000036 D03A            BEQ              NEWLINE
   26 00000038         ;COPIES FIRST ELEMENT TO THE R7
   27 00000038         ;FOR PROCESSING AND ADDS +1 TO THE
   28 00000038         ;ARRAY START POINTER - POST INDEXED
   29 00000038         
   30 00000038 F8D6 A000       LDR              R10,[R6]
   31 0000003C EB07 078A       ADD              R7,R7,R10,LSL#2 ;WEIGHT 4 FOR C
                                                            URRENT ELEMNET
   32 00000040 F04F 0A00       MOV              R10,#0
   33 00000044         
   34 00000044 F856 AC12       LDR              R10,[R6,#-18]
   35 00000048 4457            ADD              R7,R7,R10   ;WEISGHT 1 FOR DIAG
                                                            NOAL ELEMENT (UPPER
                                                             LEFT)
   36 0000004A         
   37 0000004A F856 AC10       LDR              R10,[R6,#-16]
   38 0000004E 4457            ADD              R7,R7,R10   ;WEIGHT 1 FOR DIAGN
                                                            OAL ELEMENT (UPPER 
                                                            RIGHT)
   39 00000050         
   40 00000050 F8D6 A010       LDR              R10,[R6,#+16]
   41 00000054 4457            ADD              R7,R7,R10   ;WEIGHT 1 FOR DIAGN
                                                            OAL ELEMENT (LOWER 



ARM Macro Assembler    Page 2 


                                                            LEFT)
   42 00000056         
   43 00000056 F8D6 A012       LDR              R10,[R6,#+18]
   44 0000005A 4457            ADD              R7,R7,R10   ;WEIGHT 1 FOR DIAGN
                                                            OAL ELEMENT (LOWER 
                                                            RIGHT)
   45 0000005C         
   46 0000005C         
   47 0000005C F856 9C11       LDR              R9,[R6,#-17]
   48 00000060 46C8            MOV              R8,R9
   49 00000062 EB07 0748       ADD              R7,R7,R8,LSL#1 ;WEIGHT 2 FOR AB
                                                            OVE ELEMENT
   50 00000066 F04F 0800       MOV              R8,#0
   51 0000006A F04F 0900       MOV              R9,#0
   52 0000006E         
   53 0000006E F856 9C01       LDR              R9,[R6,#-1]
   54 00000072 46C8            MOV              R8,R9
   55 00000074 EB07 0748       ADD              R7,R7,R8,LSL#1 ;WEIGHT 2 FOR LE
                                                            FT ELEMENT
   56 00000078 F04F 0800       MOV              R8,#0
   57 0000007C F04F 0900       MOV              R9,#0
   58 00000080         
   59 00000080 F8D6 9001       LDR              R9,[R6,#+1]
   60 00000084 46C8            MOV              R8,R9
   61 00000086 EB07 0748       ADD              R7,R7,R8,LSL#1 ;WEIGHT 2 FOR RI
                                                            GHT ELEMENT
   62 0000008A F04F 0800       MOV              R8,#0
   63 0000008E F04F 0900       MOV              R9,#0
   64 00000092         
   65 00000092 F8D6 9011       LDR              R9,[R6,#+17]
   66 00000096 46C8            MOV              R8,R9
   67 00000098 EB07 0748       ADD              R7,R7,R8,LSL#1 ;WEIGHT 2 FOR BE
                                                            LOW ELEMENT
   68 0000009C F04F 0800       MOV              R8,#0
   69 000000A0 F04F 0900       MOV              R9,#0
   70 000000A4         
   71 000000A4 EA4F 1727       MOV              R7,R7,ASR#4
   72 000000A8 F845 7B01       STR              R7,[R5],#+1 ;STORE THE AVERAGE 
                                                            PIXEL ON THE STACK 
                                                            POINTER AND INCREME
                                                            NT SP
   73 000000AC         
   74 000000AC E7B7            B                LOOP        ;BRANCH TO LOOP  
   75 000000AE F04F 0100 
                       NEWLINE MOV              R1,#0       ;RESET THE COLUMN C
                                                            OUNTER
   76 000000B2 F106 0601       ADD              R6,R6,#+1   ;SET THE NEW LINE A
                                                            DDRESS
   77 000000B6 E7B2            B                LOOP
   78 000000B8 E7FE    EOF     B                EOF         ;END OF ALGORITHM  
                                                            
   79 000000BA 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00    LINE0   DCB              0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0 
                                                            ;ZERO BLOCK



ARM Macro Assembler    Page 3 


   80 000000CB 00 77 63 
              6F 8D 2B 
              00 0C 07 
              00 0A 10 
              0F 21 21 
              1F 00    LINE1   DCB              0,119,99,111,141,43,0,12,7,0,10
,16,15,33,33,31,0
   81 000000DC 00 60 5D 
              6C 70 86 
              3A 02 00 
              09 00 00 
              0E 18 16 
              16 00    LINE2   DCB              0,96,93,108,112,134,58,2,0,9,0,
0,14,24,22,22,0
   82 000000ED 00 6E 67 
              67 6A 7B 
              78 3B 08 
              00 00 00 
              03 09 0C 
              0F 00    LINE3   DCB              0,110,103,103,106,123,120,59,8,
0,0,0,3,9,12,15,0
   83 000000FE 00 65 82 
              6F 60 65 
              7A 7D 46 
              0A 03 02 
              00 05 04 
              09 00    LINE4   DCB              0,101,130,111,96,101,122,125,70
,10,3,2,0,5,4,9,0
   84 0000010F 00 7F 67 
              65 6D 6C 
              72 7B 7C 
              4C 05 00 
              04 0A 00 
              07 00    LINE5   DCB              0,127,103,101,109,108,114,123,1
24,76,5,0,4,10,0,7,0
   85 00000120 00 71 76 
              77 72 6D 
              77 70 74 
              87 70 1A 
              00 0D 00 
              03 00    LINE6   DCB              0,113,118,119,114,109,119,112,1
16,135,112,26,0,13,0,3,0
   86 00000131 00 6F 74 
              76 72 6E 
              70 79 66 
              6E 8E 6A 
              1A 00 0A 
              00 00    LINE7   DCB              0,111,116,118,114,110,112,121,1
02,110,142,106,26,0,10,0,0
   87 00000142 00 6C 71 
              74 73 70 
              80 60 75 
              7C 65 81 
              76 17 00 
              11 00    LINE8   DCB              0,108,113,116,115,112,128,96,11
7,124,101,129,118,23,0,17,0
   88 00000153 00 6B 6F 
              73 73 72 
              74 77 7D 



ARM Macro Assembler    Page 4 


              72 61 6D 
              7B 74 2B 
              0A 00    LINE9   DCB              0,107,111,115,115,114,116,119,1
25,114,97,109,123,116,43,10,0
   89 00000164 00 6C 6E 
              72 73 73 
              71 77 74 
              74 77 6E 
              71 88 86 
              38 00    LINE10  DCB              0,108,110,114,115,115,113,119,1
16,116,119,110,113,136,134,56,0
   90 00000175 00 6F 6E 
              71 73 74 
              7C 6C 70 
              78 73 78 
              7C 70 8B 
              8E 00    LINE11  DCB              0,111,110,113,115,116,124,108,1
12,120,115,120,124,112,139,142,0
   91 00000186 00 73 6F 
              71 73 74 
              6E 8B 72 
              5E 7C 7A 
              68 7B 72 
              84 00    LINE12  DCB              0,115,111,113,115,116,110,139,1
14,94,124,122,104,123,114,132,0
   92 00000197 00 76 70 
              71 73 74 
              77 74 7D 
              78 67 72 
              7E 6E 65 
              6E 00    LINE13  DCB              0,118,112,113,115,116,119,116,1
25,120,103,114,126,110,101,110,0
   93 000001A8 00 76 71 
              5B 75 67 
              71 71 71 
              72 73 74 
              74 75 69 
              68 00    LINE14  DCB              0,118,113,91,117,103,113,113,11
3,114,115,116,116,117,105,104,0
   94 000001B9 00 7C 75 
              5E 75 67 
              70 71 71 
              72 73 74 
              74 74 7A 
              6C 00    LINE15  DCB              0,124,117,94,117,103,112,113,11
3,114,115,116,116,116,122,108,0
   95 000001CA 00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00 00 
              00 00    LINE16  DCB              0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
,0 
                                                            ;ZERO BLOCK
   96 000001DB         
   97 000001DB                 END
Command Line: --debug --xref --cpu=Cortex-M4.fp --apcs=interwork --depend=.\alg
orithm_assembly.d -o.\algorithm_assembly.o -IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM
\CMSIS\Include -IC:\Keil\ARM\Inc\ST\STM32F4xx --predefine="__EVAL SETA 1" --lis



ARM Macro Assembler    Page 5 


t=.\algorithm_assembly.lst algorithm_assembly.s
